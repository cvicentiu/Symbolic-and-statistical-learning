var mini_map_open=function(el,_2,_3,_4,_5,_6,zl,_8){if(!window.ymap){window.map=window.ymap=new YMap(_ge("map"));}if(!window.ymap){return;}window.ymap.setMapType(YAHOO_MAP_HYB);window.ymap.disableDragMap();var _9=_ge("div_mini_map_frame");if(!_9.mini_map_frame_go_go_go){F.decorate(_9,F._mini_map_frame).mini_map_frame_go_go_go();}_9.show(el,_2,_3,_4,_5,_6,zl,_8);};F._mini_map_anchor={mini_map_anchor_go_go_go:function(_a,_b){this.style.color="#4a90e6";this.style.cursor=(F.is_ie)?"hand":"pointer";this.geo_point=_a;this.zl=17-_b+5;if(this.zl>16){this.zl=16;}},onclick:function(e){_ge("div_mini_map_frame").show(this,this.geo_point,this.zl);}};F._mini_map_frame={mini_map_frame_go_go_go:function(el){var _e=1;this.visible=false;this.map_loaded=false;this.current_photo_id=null;this.ov=null;this.mo=null;this.parent_el=el;this.left_offset=null;this.style.position="absolute";this.style.width="510px";this.style.height="307px";this.style.zIndex="2000";this.style.background="#f0f0f0";var _f=_ge("div_mini_map_frame2");_f.style.position="absolute";_f.style.top="2px";_f.style.left="2px";_f.style.width="506px";_f.style.height="303px";_f.style.background="#ffffff";var _10=_ge("div_mini_map_frame3");_10.style.position="absolute";_10.style.top="27px";_10.style.left="3px";_10.style.width="500px";_10.style.height="250px";_10.style.overflow="hidden";F.decorate(_ge("close_button"),F._map_close_button).button_go_go_go();_ge("map").style.position="absolute";_ge("map").style.top="0px";_ge("map").style.left="0px";var _11=new YSize(500,372);map.resizeTo(_11);this.pop_shadow_id=F.make_shadow(this.id,994).id;var _12=YUtility.createNode("div","div_zoom_background");var hs={position:"absolute",top:"4px",right:"4px",width:"24px",height:"165px"};YUtility.setStyle(_12,hs);var _14=YUtility.createNode("img","map_zoom_background");var hs={position:"absolute",top:"0px",left:"0px",width:"24px",height:"165px"};YUtility.setStyle(_14,hs);_14.src=_images_root+"/map_zoom_background.png";_14.className="trans_png";YUtility.appendNode(_12,_14);var _14=YUtility.createNode("img","candy_map_zoom_out");var hs={position:"absolute",top:"4px",left:"4px",width:"16px",height:"16px"};YUtility.setStyle(_14,hs);_14.style.cursor=(F.is_ie)?"hand":"pointer";_14.src=_images_root+"/candy_map_zoom_out_default.png";YUtility.appendNode(_12,_14);var _14=YUtility.createNode("img","candy_map_zoom_in");var hs={position:"absolute",top:"145px",left:"4px",width:"16px",height:"16px"};YUtility.setStyle(_14,hs);_14.style.cursor=(F.is_ie)?"hand":"pointer";_14.src=_images_root+"/candy_map_zoom_in_default.png";YUtility.appendNode(_12,_14);var _14=YUtility.createNode("img","candy_map_dragger");var hs={position:"absolute",top:"20px",left:"3px",width:"18px",height:"13px"};YUtility.setStyle(_14,hs);_14.style.cursor=(F.is_ie)?"hand":"pointer";_14.src=_images_root+"/candy_map_zoom_drag.png";_14.className="trans_png";YUtility.appendNode(_12,_14);YUtility.appendNode(_ge("map"),_12);F.decorate(_ge("candy_map_zoom_in"),F._map_zoom_button).button_go_go_go("in");F.decorate(_ge("candy_map_zoom_out"),F._map_zoom_button).button_go_go_go("out");YAHOO.util.Event.addListener(_ge("candy_map_dragger"),"mousedown",this.map_dragger_mouseDown,this,true);map._coordTable["ylogo"].dom.style.bottom="128px";F.eb_add(this);},window_onresize:function(){if(this.visible){var _15=_find_x(_ge("Main"))+this.left_offset;this.style.left=_15+"px";this.pop_place();}},show:function(el,_17,_18,_19,_1a,_1b,zl,_1d){this.parent_el=el;if(this.current_photo_id!=_17){if(this.mo!=null){map.removeOverlay(this.mo);}var _1e=this.pop_shadow_id;var _1f=function(){_ge(_1e).shadow_show();};if(F.is_ie){_ge(this.pop_shadow_id).shadow_show();}else{anim_do_opacity_to(this,1,1,100,"easeInQuad",_1f);}this.current_photo_id=_17;var _20=_find_x(el)-289+11;if(_20<_find_x(_ge("Main"))){_20=_find_x(_ge("Main"))+11;}if(_20+_pi(this.style.width)>_find_x(_ge("Main"))+_ge("Main").offsetWidth-28){_20-=(_20+_pi(this.style.width))-(_find_x(_ge("Main"))+_ge("Main").offsetWidth-28);}this.left_offset=_20-_find_x(_ge("Main"));this.style.top=_find_y(el)-315+"px";this.style.left=_20+"px";zl=17-zl+4;if(zl>16){zl=16;}map.drawZoomAndCenter(_1b,zl);this.toggle_zoom();var div=YUtility.createNode("div","single_marker");var _22=YUtility.createNode("img","img_single_marker");_22.style.position="absolute";_22.style.left="-27px";_22.style.top="-136px";_22.style.width="159px";_22.style.height="146px";_22.src=_images_root+"/pop_up_pinwin.png";_22.className="trans_png";YUtility.appendNode(div,_22);var _22=YUtility.createNode("img","img_single_marker_thumb");_22.style.position="absolute";_22.style.left="-16px";_22.style.top="-126px";_22.src=_1a;YUtility.appendNode(div,_22);this.mo=new YCustomOverlay(_1b,div);this.ov=map.addOverlay(this.mo);if(_ge("map_links1")){_ge("map_links1").innerHTML="<a href=\""+_18+"?view=users\"><strong>"+F.output.get("photo_mini_map_view_on_map",_19)+"</strong></a>";}if(_1d){var _23=_1d.replace("<a>","").replace("</a>","");_23+=" (See <a href=\""+_18+"?view=everyones\">"+F.output.get("photo_mini_map_more_photos")+"</a>)";}if(_ge("map_links2")){_ge("map_links2").innerHTML=_23;setTimeout("_ge('div_mini_map_frame').set_width('map_links2')",100);}if(_ge("map_links")){setTimeout("_ge('div_mini_map_frame').set_width('map_links')",100);}if(_ge("pretty_lat_long")){_ge("pretty_lat_long").innerHTML=this.make_pretty(_1b.Lat,_1b.Lon);}this.visible=true;this.style.display="block";this.window_onresize();}else{if(this.current_photo_id==_17&&this.visible==true){this.hide();}else{if(this.current_photo_id==_17&&this.visible==false){var _1e=this.pop_shadow_id;var _1f=function(){_ge(_1e).shadow_show();};if(F.is_ie){_ge(this.pop_shadow_id).shadow_show();}else{anim_do_opacity_to(this,1,1,100,"easeInQuad",_1f);}this.visible=true;this.style.display="block";this.window_onresize();}}}},set_width:function(_24){if(_ge(_24).offsetHeight>20){_ge("div_mini_map_frame").style.height="319px";_ge("div_mini_map_frame2").style.height="315px";this.style.top=_find_y(this.parent_el)-327+"px";}else{_ge("div_mini_map_frame").style.height="307px";_ge("div_mini_map_frame2").style.height="303px";this.style.top=_find_y(this.parent_el)-315+"px";}_ge(this.pop_shadow_id).shadow_size_and_place();},make_pretty:function(lat,lon){var _27=this.dec_to_dms(lat);if(lat>0){_27.push("N");}else{_27.push("S");}var _28=this.dec_to_dms(lon);if(lon>0){_28.push("E");}else{_28.push("W");}return _27[0]+"&#176;"+_27[1]+"' "+_27[2]+"\" "+_27[3]+", "+_28[0]+"&#176;"+_28[1]+"' "+_28[2]+"\" "+_28[3];},dec_to_dms:function(_29){_29=Math.abs(_29);while(_29>360){_29-=360;}var deg=Math.floor(_29);var _2b=3600*(_29-deg);var min=Math.floor(_2b/60);var _2d=(_2b/60)-min;var sec=Math.round(60*_2d);if(sec<10){sec="0"+sec;}return new Array(deg,min,sec);},hide:function(){_ge(this.pop_shadow_id).shadow_hide();var _2f=this.id;var _30=function(){_ge(_2f).done_hiding();};if(F.is_ie){this.done_hiding();}else{anim_do_opacity_to(this,5,35,0,"easeInQuad",_30);}},done_hiding:function(){this.visible=false;this.style.display="none";},pop_place:function(_31,_32){_ge(this.pop_shadow_id).shadow_size_and_place();},toggle_zoom:function(){if(map.getZoomLevel()&&_ge("candy_map_dragger")){_ge("candy_map_dragger").style.top=20+((17-map.getZoomLevel())*7)+"px";}},map_dragger_mouseDown:function(e){YAHOO.util.Event.stopEvent(e);this._new_zoom_level=map.getZoomLevel();this._startDragY=YAHOO.util.Event.getPageY(e)-_pi(_ge("candy_map_dragger").style.top);YAHOO.util.Event.addListener(document,"mouseup",this.map_dragger_mouseUp,this,true);YAHOO.util.Event.addListener(document,"mousemove",this.map_dragger_mouseMove,this,true);},map_dragger_mouseUp:function(e){YAHOO.util.Event.stopEvent(e);YAHOO.util.Event.removeListener(document,"mouseup",this.map_dragger_mouseUp);YAHOO.util.Event.removeListener(document,"mousemove",this.map_dragger_mouseMove);map.setZoomLevel(this._new_zoom_level);_ge("div_mini_map_frame").toggle_zoom();},map_dragger_mouseMove:function(e){var y=(YAHOO.util.Event.getPageY(e)-this._startDragY);this._new_zoom_level=17-(_pi(y/7)-3);if(this._new_zoom_level<1){this._new_zoom_level=1;}if(this._new_zoom_level>17){this._new_zoom_level=17;}_ge("candy_map_dragger").style.top=((17-this._new_zoom_level)*7)+20+"px";}};F._map_close_button={_decotype:F._simple_button,className:"simple_butt",button_go_go_go:function(){this.style.position="absolute";this.style.right="8px";this.style.top="8px";this.style.cursor=(F.is_ie)?"hand":"pointer";this.innerHTML="<span style=\"color: #999\">"+F.output.get("close")+"</span><img src=\""+_images_root+"/simple_close_default.gif\" width=\"15\" height=\"15\" style=\"overflow:visible\">";F._map_close_button._decotype.button_go_go_go.apply(this);},onclick:function(e){F.stop_event_propagation(e);_ge("div_mini_map_frame").hide();},ondblclick:function(e){F.stop_event_propagation(e);_ge("div_mini_map_frame").hide();}};F._map_zoom_button={_decotype:F._simple_button,button_go_go_go:function(_39){this.direction=_39;F._map_zoom_button._decotype.button_go_go_go.apply(this);},onclick:function(e){var _3b=map.getZoomLevel();if(this.direction=="in"){_3b--;}if(this.direction=="out"){_3b++;}if(_3b<1){_3b=1;}if(_3b>17){_3b=17;}map.setZoomLevel(_3b);_ge("div_mini_map_frame").toggle_zoom();F.stop_event_propagation(e);},ondblclick:function(e){F.stop_event_propagation(e);}};
